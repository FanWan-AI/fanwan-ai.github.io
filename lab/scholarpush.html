<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title data-i18n="scholarpush_title">学术快报 - 每日精选论文推荐</title>
  <link rel="icon" href="../assets/logo.svg" type="image/svg+xml">
  <meta name="theme-color" content="#0ea5e9">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' data: https:; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline'; font-src 'self' data:; connect-src 'self'; base-uri 'self'; object-src 'none'">
  <meta name="referrer" content="no-referrer-when-downgrade">
  <meta name="description" content="学术快报 - 每日精选论文推荐" data-i18n-content="scholarpush_title">
  <link rel="canonical" href="https://fanwan-ai.github.io/lab/scholarpush.html">
  <meta property="og:type" content="website">
  <meta property="og:title" content="学术快报 - 每日精选论文推荐" data-i18n-content="scholarpush_title">
  <meta property="og:description" content="每日AI顶会/期刊论文精粹，一分钟掌握学术前沿。" data-i18n-content="module_scholarpush_desc">
  <meta property="og:image" content="https://fanwan-ai.github.io/assets/placeholder.jpg">
  <meta property="og:image:type" content="image/jpeg">
  <meta property="og:image:alt" content="ScholarPush cover">
  <meta property="og:url" content="https://fanwan-ai.github.io/lab/scholarpush.html">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="学术快报 - 每日精选论文推荐" data-i18n-content="scholarpush_title">
  <meta name="twitter:description" content="每日AI顶会/期刊论文精粹，一分钟掌握学术前沿。" data-i18n-content="module_scholarpush_desc">
  <meta name="twitter:image" content="https://fanwan-ai.github.io/assets/placeholder.jpg">
  <script>try{var L=localStorage.getItem('lang')||document.documentElement.lang||'zh';document.documentElement.setAttribute('lang',L);}catch(e){}</script>
  <link rel="stylesheet" href="../style.css">
  <script defer src="../lang.js"></script>
  <script defer src="../script.js"></script>
  <style>
    /* Single-column ScholarPush page */
    .sp-one{max-width:980px;margin:0 auto;padding:0 12px}
    .sp-toolbar{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    .sp-chiprow{display:flex;gap:8px;flex-wrap:wrap}
    .sp-section{margin:14px 0}
    .sp-card{padding:12px 14px}
    .sp-list{display:flex;flex-direction:column;gap:10px}
    .sp-meta{font-size:12px;color:var(--muted);display:flex;gap:6px;flex-wrap:wrap}
    .sp-title{font-size:16px;line-height:1.4;margin:0 0 6px 0}
  .sp-abstract{margin:0;color:var(--muted)}
    .stat-grid{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:10px}
    @media (max-width:700px){.stat-grid{grid-template-columns:repeat(2,minmax(0,1fr));}}
  </style>
</head>
<body class="blog">
  <a class="skip-link" href="#main">Skip to main content</a>
  <header>
    <nav class="navbar container">
      <a href="../index.html" class="brand" aria-label="Home">
        <img src="../assets/logo.svg" alt="Fan Wan logo" class="brand-logo" width="28" height="28" />
        <span class="logo"><span class="i18n l-zh">首页</span><span class="i18n l-en">Home</span><span class="i18n l-es">Inicio</span></span>
      </a>
      <ul class="nav-links">
        <li><a href="../index.html"><span class="icon" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M3 12l9-9 9 9"/><path d="M9 21V9h6v12"/></svg></span> <span class="i18n l-zh">首页</span><span class="i18n l-en">Home</span><span class="i18n l-es">Inicio</span></a></li>
        <li><a href="../about.html"><span class="i18n l-zh">关于我</span><span class="i18n l-en">About</span><span class="i18n l-es">Acerca de</span></a></li>
        <li><a href="../publications.html"><span class="i18n l-zh">学术出版物</span><span class="i18n l-en">Research</span><span class="i18n l-es">Investigación</span></a></li>
        <li><a href="../blog.html"><span class="i18n l-zh">博客</span><span class="i18n l-en">Blog</span><span class="i18n l-es">Blog</span></a></li>
  <li><a href="../ai-lab.html"><span class="i18n l-zh">AI Studio</span><span class="i18n l-en">AI Studio</span><span class="i18n l-es">Taller de IA</span></a></li>
        <li><a href="../contact.html"><span class="i18n l-zh">联系</span><span class="i18n l-en">Contact</span><span class="i18n l-es">Contacto</span></a></li>
      </ul>
      <div class="nav-actions">
        <div class="lang-switcher">
          <button id="lang-button" class="btn outline icon-btn" aria-haspopup="listbox" aria-expanded="false">
            <svg class="icon icon-globe" viewBox="0 0 24 24" aria-hidden="true"><g fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"/><path d="M3 12h18M12 3a15 15 0 0 1 0 18M12 3a15 15 0 0 0 0 18"/></g></svg>
            <span class="label"></span>
          </button>
          <ul id="lang-menu" class="lang-menu" role="listbox" aria-label="Language" hidden>
            <li role="option" data-lang="en">English</li>
            <li role="option" data-lang="zh">中文</li>
            <li role="option" data-lang="es">Español</li>
          </ul>
          <select id="lang-select" hidden>
            <option value="en">English</option>
            <option value="zh">中文</option>
            <option value="es">Español</option>
          </select>
        </div>
        <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme" title="Toggle theme">
          <svg class="icon icon-bulb" viewBox="0 0 24 24" aria-hidden="true">
            <g fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 18h6"/>
              <path d="M10 22h4"/>
              <path d="M8.5 15.5c-.9-1-1.5-2.3-1.5-3.8a5 5 0 1 1 10 0c0 1.5-.6 2.8-1.5 3.8-.6.7-1.1 1.4-1.3 2.2H9.8c-.2-.8-.7-1.5-1.3-2.2z"/>
              <path d="M12 2v2"/>
              <path d="M4 10h2"/>
              <path d="M18 10h2"/>
              <path d="M5.5 5.5l1.4 1.4"/>
              <path d="M18.5 5.5l-1.4 1.4"/>
            </g>
          </svg>
          <svg class="icon icon-moon" viewBox="0 0 24 24" aria-hidden="true"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <svg class="icon icon-system" viewBox="0 0 24 24" aria-hidden="true"><g fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="12" rx="2" ry="2"/><path d="M8 20h8M12 16v4"/></g></svg>
        </button>
        <div class="hamburger" id="hamburger">
          <span></span><span></span><span></span>
        </div>
      </div>
    </nav>
  </header>

  <main id="main">
    <section class="page-hero section">
      <div class="bg-shapes">
        <span class="shape shape1"></span>
        <span class="shape shape2"></span>
        <span class="shape shape3"></span>
        <span class="shape shape4"></span>
      </div>
      <div class="container">
  <h1><span class="icon" aria-hidden="true"><svg viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><path d="M14 2v6h6"/><path d="M16 13H8"/><path d="M16 17H8"/></g></svg></span> <span data-i18n="scholarpush_title">学术快报 - 每日精选论文推荐</span></h1>
  <p class="subtitle" data-i18n="scholarpush_subtitle">每日自动精选最新论文，服务于研究者、开发者与技术爱好者</p>
      </div>
    </section>

    <section class="section" id="sp">
      <div class="container sp-one">
        <div class="sp-section">
          <h2 style="margin:0 0 4px 0" data-i18n="module_scholarpush_title">学术快报</h2>
          <p id="sp-sub" class="muted" style="margin:0 0 10px 0">—</p>
          <div class="card sp-card sp-toolbar">
            <!-- removed budget selector -->
            <div id="topic-chips" class="sp-chiprow" role="toolbar" aria-label="Topics"></div>
            <span style="flex:1 1 auto"></span>
            <input id="q" class="input" data-i18n-placeholder="search_placeholder" placeholder="搜索标题/要点/标签…" style="min-width:220px;height:36px;padding:6px 10px">
          </div>
        </div>

        <div class="sp-section">
          <h3 style="margin:0 0 8px 0" data-i18n="sp_overview">概览（5 分钟）</h3>
          <div id="stats" class="stat-grid"></div>
        </div>

        <div class="sp-section">
          <h3 style="margin:0 0 8px 0" data-i18n="sp_must_read">必读（15 分钟）</h3>
          <div id="must" class="sp-list"></div>
        </div>

        <div class="sp-section">
          <h3 style="margin:0 0 8px 0" data-i18n="sp_nice_read">扩展阅读（10 分钟）</h3>
          <div id="nice" class="sp-list"></div>
        </div>

        <div class="sp-section" id="deep" hidden>
          <h3 style="margin:0 0 8px 0" data-i18n="sp_deep_dive">主题深读</h3>
          <div id="deep-card" class="card sp-card"></div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <p>© <span id="year"></span> Fan Wan</p>
    </div>
  </footer>

  <script>
  (function(){
    const qInput = document.getElementById('q');
    const chipRow = document.getElementById('topic-chips');
    const statsEl = document.getElementById('stats');
    const mustEl = document.getElementById('must');
    const niceEl = document.getElementById('nice');
    const deepWrap = document.getElementById('deep');
    const deepCard = document.getElementById('deep-card');
    const subEl = document.getElementById('sp-sub');
  // budget selector removed

    let data = null;
    let items = [];
    let activeTags = new Set();
    let query = '';

    function btn(href,label){ return `<a class="btn outline small" target="_blank" rel="noopener" href="${href}">${label}</a>` }
    // Build a map of ref url -> title for client-side healing of truncated headlines
    let refTitleByUrl = new Map();
    // basic HTML escaper for safe attribute/text injection
    function esc(s){
      return String(s||'')
        .replace(/&/g,'&amp;')
        .replace(/</g,'&lt;')
        .replace(/>/g,'&gt;')
        .replace(/"/g,'&quot;');
    }
    function niceHeadline(it){
      let h = String(it.headline||'').trim();
      // Try to heal truncated headlines using refs by URL
      const url = (it.links&& (it.links.paper||it.links.project)) || '';
      if(url && refTitleByUrl.has(url)){
        const ref = String(refTitleByUrl.get(url)||'').trim();
        const task = it.task || '';
        const prefix = task ? `[${task}] ` : '';
        // strip task prefix from current headline for comparison
        const base = h.replace(/^\[[^\]]+\]\s*/, '').trim();
        const baseTrim = base.replace(/[\s\-–:]+$/, ''); // drop trailing cut markers
        const looksCut = h.endsWith('-') || h.endsWith(':') || /\s$/.test(h);
        // If ref clearly starts with our base (or we see cut markers), trust ref title
        if(ref && (looksCut || (baseTrim.length>6 && ref.toLowerCase().startsWith(baseTrim.toLowerCase())))){
          return prefix + ref;
        }
      }
      return h;
    }
    function displayTitle(it){
      const lang = document.documentElement.lang || 'zh';
      const zh = (it.title_i18n && it.title_i18n.zh) ? it.title_i18n.zh : (it.headline||'');
      const en = (it.title_i18n && it.title_i18n.en) ? it.title_i18n.en : (it.headline||'');
      let t = (lang==='zh') ? (zh||niceHeadline(it)) : (en||niceHeadline(it));
      if(lang!=='zh' && it.task && !/^\[[^\]]+\]/.test(t)){
        t = `[${it.task}] ` + t;
      }
      return t;
    }
    function relTime(iso){
      try{
        if(!iso) return '';
        const d = new Date(iso);
        const s = Math.max(0, (Date.now()-d.getTime())/1000);
        if(s<60) return 'just now';
        if(s<3600) return Math.floor(s/60)+'m ago';
        if(s<86400) return Math.floor(s/3600)+'h ago';
        return Math.floor(s/86400)+'d ago';
      }catch(e){return ''}
    }
    function card(it){
      const tags=(it.tags||[]).map(t=>`<span class="tag">${t}</span>`).join(' ');
  const links=it.links||{}; const id=Math.random().toString(36).slice(2);
      const keynumsCompact=(it.key_numbers_compact||[]).slice(0,3).map(s=>`<span class="tag small">${esc(s)}</span>`).join(' ');
      const codeBadge = it.has_code ? `<span class="tag small" title="has code">code</span>` : '';
      const utils=(it.reusability||[]).slice(0,3).map(x=>`<li>${x}</li>`).join('');
      const limits=(it.limitations||[]).slice(0,2).map(x=>`<li>${x}</li>`).join('');
      const host = it.host||'';
      const tsRel = relTime(it.ts||'');
      const meta=[it.task||'',it.type||'',host,tsRel].filter(Boolean).join(' · ');
  const isZH = (document.documentElement.lang||'zh')==='zh';
  const fullTxt  = isZH ? String(it.summary_i18n?.zh || it.one_liner || it.quick_read || '')
            : String(it.summary_i18n?.en || it.one_liner || it.quick_read || '');
  // no short/expand; always render full text
      const titleHtml = esc(displayTitle(it));
      return `<article class="card sp-card">
        <h4 class="sp-title" style="display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden">${titleHtml}</h4>
        <div class="sp-meta">${meta}${tags?` · ${tags}`:''} ${keynumsCompact?` · ${keynumsCompact}`:''} ${codeBadge}</div>
    <p id="abs-${id}" class="sp-abstract">${esc(fullTxt)}</p>
        ${(utils||limits)?`<div style="display:flex;gap:12px;margin-top:6px">${utils?`<ul class="muted" style="margin:0">${utils}</ul>`:''}${limits?`<ul class="muted" style="margin:0">${limits}</ul>`:''}</div>`:''}
        <div style="display:flex;gap:6px;flex-wrap:wrap;margin-top:8px">
          ${links.paper&&links.paper!=='N/A'?btn(links.paper,'Paper'):''}
          ${links.code&&links.code!=='N/A'?btn(links.code,'Code'):''}
          ${(links.pdf&&links.pdf!=='N/A')?btn(links.pdf,'PDF'):''}
          ${links.project&&links.project!=='N/A'?btn(links.project,'Proj'):''}
        </div>
      </article>`;
    }
  function t(key, fallback){ try { const lang = localStorage.getItem('lang')||document.documentElement.lang||'zh'; const tx=(window.translations?.[lang]?.[key]); return tx||fallback||key; } catch { return fallback||key; } }
  function statCard(title,val){ return `<div class="card sp-card"><div class="muted">${title}</div><div style="font-weight:600;font-size:18px">${val}</div></div>` }
    function renderStats(stats){
      const byTask=stats.by_task||{}; const sum=Object.values(byTask).reduce((a,b)=>a+b,0);
      const top=Object.entries(byTask).sort((a,b)=>b[1]-a[1]).slice(0,4);
      statsEl.innerHTML = [
        statCard(t('sp_stat_total','总条目'), sum),
        statCard(t('sp_stat_code','含代码'), stats.with_code||0),
        statCard(t('sp_stat_bench','新基准/数据'), stats.new_benchmarks||0),
        statCard(t('sp_stat_top_tasks','Top 任务'), top.map(([k,v])=>`${k}:${v}`).join(' · ')||'—')
      ].join('');
    }
    function buildChips(){
      chipRow.innerHTML='';
      const byTask = (data?.stats?.by_task)||{};
      const allBtn=document.createElement('button'); allBtn.className='btn outline small'+(activeTags.size===0?' primary':''); allBtn.textContent=t('all_label','全部'); allBtn.onclick=()=>{activeTags.clear(); renderAll();}; chipRow.appendChild(allBtn);
      Object.entries(byTask).sort((a,b)=>b[1]-a[1]).forEach(([t,n])=>{
        const b=document.createElement('button'); const act=activeTags.has(t);
        b.className='btn outline small'+(act?' primary':''); b.textContent=`${t} · ${n}`; b.onclick=()=>{ act?activeTags.delete(t):activeTags.add(t); renderAll();}; chipRow.appendChild(b);
      });
    }
  function filterItems(arr){
      const qs=(query||'').trim().toLowerCase();
      return arr.filter(it=>{
        if(activeTags.size>0 && !(it.tags||[]).some(t=>activeTags.has(t))) return false;
        if(!qs) return true;
    const blob = `${it.headline||''} ${it.one_liner||''} ${it.title_i18n?.zh||''} ${it.title_i18n?.en||''} ${it.summary_i18n?.zh||''} ${it.summary_i18n?.en||''} ${it.host||''} ${(it.tags||[]).join(' ')}`.toLowerCase();
        return qs.split(/\s+/).filter(Boolean).some(w=>blob.includes(w));
      });
    }
    function renderAll(){
      // subtitle
  const dt=data?.generated_at||''; const lang = localStorage.getItem('lang')||document.documentElement.lang||'zh';
  if (lang==='en') subEl.textContent = `Today ${data?.items?.length||0} · Generated at ${dt.slice(0,16).replace('T',' ')}`;
  else if (lang==='es') subEl.textContent = `Hoy ${data?.items?.length||0} · Generado a las ${dt.slice(0,16).replace('T',' ')}`;
  else subEl.textContent = `今日 ${data?.items?.length||0} 条 · 生成时间 ${dt.slice(0,16).replace('T',' ')}`;
      // chips + stats
      buildChips(); renderStats(data?.stats||{by_task:{},with_code:0,new_benchmarks:0});
      // lists
      const src=items.slice();
      const mustIdx=(data?.must_reads||[]).filter(i=>i<src.length);
      const niceIdx=(data?.nice_to_read||[]).filter(i=>i<src.length);
      const mustList = filterItems(mustIdx.map(i=>src[i]));
      const niceList = filterItems(niceIdx.map(i=>src[i]));
      mustEl.innerHTML = mustList.map(card).join('');
      niceEl.innerHTML = niceList.map(card).join('');
      // deep
      const dd=data?.deep_dive; deepWrap.hidden = !dd; if(dd){ deepCard.innerHTML = `<h4 style="margin:0 0 6px 0">${dd.title||'主题深读'}</h4><p class="muted">${dd.summary||''}</p>`; }
    }
  async function init(){
      const sp = await fetch('../data/ai/scholarpush/index.json', {cache:'no-store'}).then(r=>r.json()).catch(()=>null);
      data = sp||{}; items = Array.isArray(sp?.items)? sp.items: [];
      // normalize pdf links if missing
      items.forEach(it=>{ if(!it.links) it.links={}; if(!it.links.pdf && it.links.paper){ const m=(it.links.paper||'').match(/\d{4}\.\d{4,5}/); if(m) it.links.pdf = `https://arxiv.org/pdf/${m[0]}.pdf`; }});
      // cache refs for headline healing
      try { refTitleByUrl = new Map((sp?.refs||[]).map(r=>[r.url, r.title])); } catch(e) { refTitleByUrl = new Map(); }
  // no expand/collapse; abstracts are fully shown
      // bind search
      let tid=null; qInput.addEventListener('input', ()=>{ clearTimeout(tid); tid=setTimeout(()=>{ query=qInput.value||''; renderAll(); }, 200); });
  // budget selector removed
  renderAll();
  // Re-render content on language change
  window.addEventListener('language-changed', () => { renderAll(); });
    }
    init();
  })();
  </script>
</body>
</html>
